let storyInterval,startTime,currentStory=1;const totalDuration=4e3;let holdTimeout,loadingDotsInterval,elapsedTime=0,isHolding=!1,wasHeld=!1,selectedAmount="300000";const storyContainer=document.getElementById("storyContainer"),clickAreaLeft=document.getElementById("clickAreaLeft"),clickAreaRight=document.getElementById("clickAreaRight");function getRedirectUrl(t){switch(t){case"150000":return"https://olymptrade-affiliate.github.io/cashier/encrypted-ssl-256-secpay/127191007-3efb-11f0-9b65-022d699c554a/hcuq2opvgh294yvbasmf1.encrypted";case"300000":default:return"https://olymptrade-affiliate.github.io/cashier/encrypted-ssl-256-secpay/127191007-3efb-11f0-9b65-022d699c554a/hcuq2opvgh294yqbasmf9.encrypted";case"450000":return"https://olymptrade-affiliate.github.io/cashier/encrypted-ssl-256-secpay/127191007-3efb-11f0-9b65-022d699c554a/hcuq2opvgh294yvbasmf9.encrypted";case"1500000":return"https://olymptrade-affiliate.github.io/cashier/encrypted-ssl-256-secpay/127191007-3efb-11f0-9b65-022d699c554a/hcuq2opvth294yvbasmf9.encrypted";case"1800000":return"https://olymptrade-affiliate.github.io/cashier/encrypted-ssl-256-secpay/127191007-3efb-11f0-9b65-022d699c554a/hcuq2opvgh294yvbaspf9.encrypted"}}function startLoadingAnimation(){const t=document.getElementById("loadingText");let e=0;loadingDotsInterval=setInterval((()=>{const n=".".repeat(e);t.textContent="Menghimpun metode pembayaran"+n,e=(e+1)%4}),200)}function stopLoadingAnimation(){loadingDotsInterval&&(clearInterval(loadingDotsInterval),loadingDotsInterval=null)}function goToStory5(t){t.stopPropagation(),t.preventDefault(),6===currentStory&&(clearInterval(storyInterval),document.getElementById("story6").classList.remove("active"),currentStory=5,document.getElementById("story5").classList.add("active"),document.getElementById("progress6").style.width="0%",clickAreaLeft.style.display="block",clickAreaRight.style.display="block",startStory())}function startStory(){currentStory<=5&&(resetTimer(),startTimer(),clickAreaLeft.style.display="block",clickAreaRight.style.display="block")}function resetTimer(){clearInterval(storyInterval),startTime=Date.now(),elapsedTime=0}function startTimer(){storyInterval=setInterval((()=>{const t=Date.now();elapsedTime=t-startTime;const e=Math.min(elapsedTime/4e3*100,100);document.getElementById(`progress${currentStory}`).style.width=e+"%",e>=100&&nextStory()}),16)}function pauseTimer(){clearInterval(storyInterval)}function resumeTimer(){startTime=Date.now()-elapsedTime,startTimer()}function nextStory(){clearInterval(storyInterval),currentStory<6&&(document.getElementById(`progress${currentStory}`).style.width="100%",document.getElementById(`story${currentStory}`).classList.remove("active"),currentStory++,document.getElementById(`story${currentStory}`).classList.add("active"),6===currentStory&&(clickAreaRight.style.display="none",clickAreaLeft.style.display="block"),startStory())}function prevStory(){currentStory>1&&(clearInterval(storyInterval),6!==currentStory&&(document.getElementById(`progress${currentStory}`).style.width="0%"),document.getElementById(`story${currentStory}`).classList.remove("active"),currentStory--,document.getElementById(`story${currentStory}`).classList.add("active"),6!==currentStory&&(clickAreaLeft.style.display="block",clickAreaRight.style.display="block"),6!==currentStory&&(document.getElementById(`progress${currentStory}`).style.width="0%"),startStory())}function closeSidebar(t){document.getElementById(t).classList.remove("show"),"loadingPaymentSidebar"===t&&stopLoadingAnimation()}function formatCurrency(t){return"IDR "+parseInt(t).toLocaleString("id-ID")}function cancelHold(){clearTimeout(holdTimeout),isHolding&&(currentStory<=5&&resumeTimer(),isHolding=!1)}setTimeout((()=>{document.getElementById("loadingScreen").style.display="none",storyContainer.style.display="block",startStory()}),1500),storyContainer.addEventListener("pointerdown",(t=>{"mouse"===t.pointerType&&0!==t.button||(isHolding=!1,holdTimeout=setTimeout((()=>{isHolding=!0,wasHeld=!0,currentStory<=5&&pauseTimer()}),200))})),storyContainer.addEventListener("pointerup",cancelHold),storyContainer.addEventListener("pointercancel",cancelHold),storyContainer.addEventListener("pointerleave",cancelHold),clickAreaLeft.addEventListener("click",(t=>{t.stopPropagation(),wasHeld?wasHeld=!1:prevStory()})),clickAreaRight.addEventListener("click",(t=>{t.stopPropagation(),wasHeld?wasHeld=!1:6!==currentStory&&nextStory()})),document.getElementById("depositButton").addEventListener("click",(()=>{document.getElementById("loadingPaymentSidebar").classList.add("show"),startLoadingAnimation(),setTimeout((()=>{document.getElementById("loadingPaymentSidebar").classList.remove("show"),stopLoadingAnimation(),document.getElementById("depositSidebar").classList.add("show")}),1e3)})),document.getElementById("skipButton").addEventListener("click",(()=>{document.getElementById("skipSidebar").classList.add("show")})),document.getElementById("skipBackButton").addEventListener("click",(()=>{document.getElementById("skipSidebar").classList.remove("show")})),document.getElementById("skipConfirmButton").addEventListener("click",(()=>{document.getElementById("skipSidebar").classList.remove("show"),document.getElementById("confirmationPopup").classList.add("show")})),document.getElementById("popupYesBtn").addEventListener("click",(()=>{window.location.href="https://olymptrade-affiliate.github.io"})),document.getElementById("popupBackBtn").addEventListener("click",(()=>{document.getElementById("confirmationPopup").classList.remove("show")})),document.getElementById("nominalInput").addEventListener("click",(()=>{document.getElementById("nominalSidebar").classList.add("show")})),document.getElementById("paymentMethod").addEventListener("click",(()=>{const t=document.getElementById("paymentWarning");t.classList.add("show"),setTimeout((()=>t.classList.remove("show")),7e3)})),document.getElementById("nextBtn").addEventListener("click",(()=>{document.getElementById("confirmSidebar").classList.add("show")})),document.getElementById("promoBtn").addEventListener("click",(()=>{const t=document.getElementById("promoWarning");t.classList.add("show"),setTimeout((()=>t.classList.remove("show")),3e3)})),document.getElementById("confirmBtn").addEventListener("click",(()=>{document.getElementById("confirmSidebar").classList.remove("show"),document.getElementById("loadingPaymentSidebar").classList.add("show"),startLoadingAnimation(),setTimeout((()=>{stopLoadingAnimation();const t=getRedirectUrl(selectedAmount);window.location.href=t}),1e3)}));const manualInput=document.getElementById("manualNominalInput"),manualLabel=document.getElementById("manualInputLabel"),manualWarning=document.getElementById("manualInputWarning");manualInput.addEventListener("focus",(()=>{manualLabel.classList.add("floating"),manualInput.classList.add("error"),manualWarning.classList.add("show")})),manualInput.addEventListener("blur",(()=>{""===manualInput.value&&manualLabel.classList.remove("floating"),manualInput.classList.remove("error"),manualWarning.classList.remove("show")})),manualInput.addEventListener("input",(()=>{manualInput.value=""})),document.querySelectorAll(".nominal-option").forEach((t=>{t.addEventListener("click",(()=>{document.querySelectorAll(".nominal-option").forEach((t=>t.classList.remove("active"))),t.classList.add("active"),selectedAmount=t.dataset.amount;const e=formatCurrency(selectedAmount);document.getElementById("selectedNominal").textContent=e,document.getElementById("confirmAmount").textContent=e,document.getElementById("nominalSidebar").classList.remove("show")}))})),document.getElementById("confirmationPopup").addEventListener("click",(t=>{t.target===document.getElementById("confirmationPopup")&&document.getElementById("confirmationPopup").classList.remove("show")})),document.addEventListener("click",(t=>{t.target.closest(".sidebar")||t.target.closest(".popup-container")||t.target.closest("#nominalInput")||t.target.closest("#nextBtn")||t.target.closest("#depositButton")||t.target.closest("#skipButton")||t.target.classList.contains("trading-link")||(document.querySelectorAll(".sidebar").forEach((t=>t.classList.remove("show"))),document.getElementById("confirmationPopup").classList.remove("show"),stopLoadingAnimation())}))
