const mainContent=document.getElementById("mainContent"),sidebar=document.getElementById("sidebar"),overlay=document.getElementById("overlay"),closeBtn=document.getElementById("closeBtn"),signinTab=document.getElementById("signinTab"),signupTab=document.getElementById("signupTab"),signinForm=document.getElementById("signinForm"),signupForm=document.getElementById("signupForm"),backgroundImage=document.getElementById("backgroundImage");function setBackgroundImage(){const e=window.innerWidth<=768;backgroundImage.src=e?"https://cdn.jsdelivr.net/gh/OlympTradeAffiliate/src@main/1.png":"https://cdn.jsdelivr.net/gh/OlympTradeAffiliate/src@main/3.png"}function isValidEmail(e){if(!/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e))return!1;const t=e.split("@");if(2!==t.length)return!1;const n=t[0],i=t[1];if(0===n.length||n.length>64)return!1;if(n.startsWith(".")||n.endsWith("."))return!1;if(n.includes(".."))return!1;if(0===i.length||i.length>253)return!1;if(i.startsWith("-")||i.endsWith("-"))return!1;if(i.startsWith(".")||i.endsWith("."))return!1;if(i.includes(".."))return!1;if(!i.includes("."))return!1;return!(i.split(".").pop().length<2)}function isValidPassword(e){return e.length>=4}function showError(e,t){const n=document.getElementById(e),i=n.nextElementSibling,s=document.getElementById(t);n.classList.add("error"),i.classList.add("error"),requestAnimationFrame((()=>{s.classList.add("show")}))}function hideError(e,t){const n=document.getElementById(e),i=n.nextElementSibling,s=document.getElementById(t);n.classList.remove("error"),i.classList.remove("error"),s.classList.remove("show")}function showAffiliateWarning(e){const t=document.getElementById(e+"Email"),n=document.getElementById(e+"Password"),i=t.nextElementSibling,s=n.nextElementSibling,r=document.getElementById(e+"AffiliateWarning");t.classList.add("error"),n.classList.add("error"),i.classList.add("error"),s.classList.add("error"),requestAnimationFrame((()=>{r.classList.add("show")}))}function hideAffiliateWarning(e){const t=document.getElementById(e+"Email"),n=document.getElementById(e+"Password"),i=t.nextElementSibling,s=n.nextElementSibling,r=document.getElementById(e+"AffiliateWarning");t.classList.remove("error"),n.classList.remove("error"),i.classList.remove("error"),s.classList.remove("error"),r.classList.remove("show")}function initValidation(){["signinEmail","signupEmail"].forEach((e=>{const t=document.getElementById(e),n=e+"Error",i=e.includes("signin")?"signin":"signup";t.addEventListener("blur",(function(){""===this.value.trim()||isValidEmail(this.value)?hideError(e,n):showError(e,n)})),t.addEventListener("input",(function(){hideError(e,n),hideAffiliateWarning(i)}))})),["signinPassword","signupPassword"].forEach((e=>{const t=document.getElementById(e),n=e+"Error",i=e.includes("signin")?"signin":"signup";t.addEventListener("blur",(function(){""===this.value.trim()||isValidPassword(this.value)?hideError(e,n):showError(e,n)})),t.addEventListener("input",(function(){hideError(e,n),hideAffiliateWarning(i)}))}))}function initImageClickHandlers(){const e=document.getElementById("signinImage"),t=document.getElementById("signupImage");e.addEventListener("click",(function(e){e.preventDefault(),showAffiliateWarning("signin")})),t.addEventListener("click",(function(e){e.preventDefault(),showAffiliateWarning("signup")}))}function isFormValid(e){const t=e+"Email",n=e+"Password",i=document.getElementById(t),s=document.getElementById(n),r=isValidEmail(i.value),a=isValidPassword(s.value),o=""!==i.value.trim(),d=""!==s.value.trim();return o&&!r&&showError(t,t+"Error"),d&&!a&&showError(n,n+"Error"),r&&a&&o&&d}function initFloatingLabels(){document.querySelectorAll(".form-group input").forEach((e=>{const t=e.nextElementSibling;""!==e.value.trim()&&t.classList.add("active"),e.addEventListener("focus",(function(){t.classList.add("active","focused"),this.classList.contains("error")||t.classList.remove("error")})),e.addEventListener("blur",(function(){t.classList.remove("focused"),""===this.value.trim()?t.classList.remove("active"):t.classList.add("active")})),e.addEventListener("input",(function(){""!==this.value.trim()?t.classList.add("active"):this.matches(":focus")||t.classList.remove("active")}))}))}function closeSidebar(){sidebar.classList.remove("active"),overlay.classList.remove("active"),document.body.style.overflow=""}function openSidebar(){sidebar.classList.add("active"),overlay.classList.add("active"),document.body.style.overflow="hidden",setTimeout((()=>{initFloatingLabels(),initValidation(),initImageClickHandlers()}),100)}function togglePassword(e){const t=document.getElementById(e),n=t.parentElement.querySelector(".password-toggle").querySelector("svg");"password"===t.type?(t.type="text",n.innerHTML='<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/>'):(t.type="password",n.innerHTML='<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/>')}setBackgroundImage(),window.addEventListener("resize",setBackgroundImage),mainContent.addEventListener("click",(function(e){e.stopPropagation(),openSidebar()})),closeBtn.addEventListener("click",closeSidebar),overlay.addEventListener("click",closeSidebar),sidebar.addEventListener("click",(function(e){e.stopPropagation()})),signinTab.addEventListener("click",(function(){signinTab.classList.add("active"),signupTab.classList.remove("active"),signinForm.classList.remove("hidden"),signupForm.classList.add("hidden"),setTimeout((()=>{initFloatingLabels(),initValidation(),initImageClickHandlers()}),50)})),signupTab.addEventListener("click",(function(){signupTab.classList.add("active"),signinTab.classList.remove("active"),signupForm.classList.remove("hidden"),signinForm.classList.add("hidden"),setTimeout((()=>{initFloatingLabels(),initValidation(),initImageClickHandlers()}),50)})),document.querySelectorAll("form").forEach((e=>{e.addEventListener("submit",(function(e){e.preventDefault();const t=null!==this.closest("#signupForm"),n=t?"signup":"signin",i=this.querySelector(".submit-btn");if(!isFormValid(n))return;if(!t){const e=this.querySelector('input[type="checkbox"]');if(e&&!e.checked){const t=e.closest(".checkbox-group");let n=t.querySelector(".checkbox-error");return void(n||(n=document.createElement("div"),n.className="error-message checkbox-error show",n.textContent="Î˜ Harap setujui Syarat & Ketentuan!",n.style.marginTop="8px",n.style.marginLeft="0px",t.appendChild(n),setTimeout((()=>{n.parentNode&&n.remove()}),3e3)))}}i.classList.add("loading"),i.disabled=!0;i.textContent;i.textContent=t?"Masuk":"Daftar",setTimeout((()=>{window.location.href="https://example.com"}),1500)}))})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&closeSidebar()})),"ontouchstart"in window&&document.body.style.setProperty("-webkit-tap-highlight-color","transparent"),document.addEventListener("DOMContentLoaded",(function(){initFloatingLabels(),initValidation(),initImageClickHandlers()}))
